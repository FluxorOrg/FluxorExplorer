desc 'Test application'
lane :test do
  run_tests
end

desc 'Push a new beta build to TestFlight'
lane :beta do
  sync_code_signing(type: 'appstore',
                    readonly: true,
                    git_url: ENV['MATCH_GIT_URL'],
                    username: ENV['MATCH_USERNAME'],
                    git_basic_authorization: ENV['GITHUB_BASIC_AUTH'],
                    verbose: true
                   )
  increment_build_number(build_number: number_of_commits)
  gym(catalyst_platform: 'macos')
  gym(catalyst_platform: 'ios')
  upload_to_testflight
  increment_build_number(build_number: 1)
end
